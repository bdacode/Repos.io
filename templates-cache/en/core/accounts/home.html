{% load reposio_core%}<!DOCTYPE html> <html lang="en"> <head><meta charset="utf-8"/><title>"{{account.slug}}" @{{account.backend}} on Repos.io</title><meta name="description" content="Organize your owned/watched repositories from github (and soon bitbucked, google code) : https://github.com/twidi/Repos.io/"/><meta name="author" content="Stephane Angel / Twidi"/><link rel="stylesheet" href="/static/css/bootstrap.min.css?1.3"/><link rel="stylesheet" href="/static/css/project.css"/><script type="text/javascript" src="/static/js/jquery-1.5.2.min.js"></script>  <script type="text/javascript" src="/static/js/bootstrap/bootstrap-alerts.js?1.3"></script> <script type="text/javascript" src="/static/js/bootstrap/bootstrap-dropdown.js?1.3"></script>   <script type="text/javascript" src="/static/js/bootstrap/bootstrap-twipsy.js?1.3"></script> <script type="text/javascript" src="/static/js/bootstrap/bootstrap-popover.js?1.3"></script> <script type="text/javascript" src="/static/js/project.js"></script>  </head> <body id="{%if section%}{{section}}{%if subsection%}-{{subsection}}{%endif%}{%else%}body{%endif%}"> <div class="topbar"> <div class="topbar-inner"> <div class="container-fluid"> <h3><a href="/">Repos.io</a></h3> <ul class="nav"> <li{%if section == 'home'%} class="active"{%endif%}><a href="/">Home</a></li> <li><a href="http://github.com/twidi/Repos.io/">About</a></li> </ul> <form method="get" action="/search/"> <input type="text" name="q" value="{{query}}"/> <button class="btn" type="submit">Search</button> </form> <ul class="nav secondary-nav"> {%if user.is_authenticated%} <li><a href="/dashboard/">{{user.username}} : <strong>your dashboard</strong></a></li> {%with accounts=user_accounts %} {%if accounts%} <li class='dropdown{%if section == 'accounts'%} active{%endif%}' data-dropdown="dropdown"> <a href="/accounts/manage/" class="dropdown-toggle">Your accounts</a> <ul class="dropdown-menu"> {%for an_account in accounts %} <li{%if section == 'user' and account.id == an_account.id%} class="active"{%endif%}> {%with with_avatar=1 avatar_size=16 account=an_account %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %} </li> {%endfor %} <li class="divider"></li> <li{%if section == 'accounts'%} class="active"{%endif%}><a href="/accounts/manage/">Manage</a></li> </ul> </li> {%else%} <li><a href="/accounts/manage/" class="dropdown-toggle">Your accounts</a></li> {%endif%} {%endwith %} <li><a href="/accounts/logout/?next={{request.get_full_path}}">Logout</a></li> {%else%} <li><a href="/accounts/login/?next=/">Login / Register</a></li> {%endif%} </ul> </div> </div> </div> <div id="container" class="container"> {%if messages%} <ul id="messages" class="unstyled"> {%for message in messages %} <li data-alert="1" class="alert-message fade in {%if message.tags%}{{message.tags}}{%else%}info{%endif%}"><a href='#' class='close'>&times;</a><p>{{message}}</p></li> {%endfor %} </ul> {%endif%} <div id="content"{%if messages%} class="with_messages"{%endif%}>  <section id="user"> <header class="row main_header"> <div class="span-two-thirds"> {%with size=80 %}<a href="{{account.get_absolute_url}}" title="{%if account.last_fetch%}{{account.name|default:account.slug}}{%else%}{{account.slug}} (not fetched){%endif%}"><img alt="{{account.slug}}'s avatar" width="{{size|default:32}}" height="{{size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/></a> {%endwith %}  <h1> <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> </h1> {%with max_score=250 ratio=2 %}{%with obj=account %}{%with obj_score=score|default:obj.score %} {%if obj_score and obj_score >= min_score|default:10%} <div class="score" style="width:{%if obj_score > max_score|default:100%}{%widthratio max_score|default:100 1 ratio|default:1 %}{%else%}{%widthratio obj_score 1 ratio|default:1 %}{%endif%}px;{%if height%}height:{{height}}px;{%endif%}" title="Score: {{obj_score}}"></div> {%endif%} {%endwith %} {%endwith %} {%endwith %} <p> {{account.name|default:account.slug}} <a href="{{account.url}}" title="Go to its page on {{account.backend}}"><img src="/static/img/favicon_{{account.backend}}.png" alt="Page on {{account.backend}}"/></a> {%if account.homepage%}<a href="{{account.homepage}}" title="Go to its homepage: {{account.homepage}}"><img src="/static/img/favicon_home.png" alt="His homepage"/></a>{%endif%}  </p> {%if account.last_fetch%}<p>On {{account.backend}} since {{account.official_created}}.</p>{%endif%} {%with tag_style="success" %}{%with tags=account.prepared_public_tags|default:account.all_public_tags tag_link=account.get_repositories_url link_param1="distinct=y" %}{%if tags%} <ul class="tags unstyled"> {%for tag in tags %} <li><a href="{%if tag_link%}{{tag_link}}?q={{tag}}{%if link_param1%}&amp;{{link_param1}}{%endif%}{%if link_param2%}&amp;{{link_param2}}{%endif%}{%else%}#{%endif%}" class="label {{tag_style|default:"default"}}">{{tag}}</a></li> {%endfor %} </ul> {%endif%} {%endwith %} {%endwith %} </div> <div class="span-one-third"> {%if not for_related or account.backend|supports:'user_related'%}{%with fetch_type="account" obj=account %}{%if request.user and request.user.is_authenticated%} {%if for_related and obj.fetch_related_allowed and obj.last_fetch or not for_related and obj.fetch_allowed%} <form class='fetch-form' action="/fetch/" method="post">{%csrf_token %} <input type="hidden" name="type" value="{{fetch_type}}"/> <input type="hidden" name="id" value="{{obj.id}}"/> <input type="hidden" name="backend" value="{{obj.backend}}"/> {%if fetch_type == 'account'%} <input type="hidden" name="slug" value="{{obj.slug}}"/> {%else%} <input type="hidden" name="project" value="{{obj.project}}"/> {%endif%} <input type="hidden" name="next" value="{{request.get_full_path}}"/> {%if for_related%} <input type="hidden" name="related" value="1"/> {%endif%} <button class="btn{%if for_related and not obj.last_fetch_related or not for_related and not obj.last_fetch or not for_related and fetch_type == 'repository' and is_fork and not obj.fork%} primary{%endif%}" type='submit' name='submit' value='submit' title="It will fetch {%if for_related%}followers, {%if fetch_type == 'account'%}following and repositories{%else%}contributors and readme{%endif%}{%else%}fresh data{%endif%} from {{obj.backend}}"> <strong>Fetch {%if for_related%}related{%else%}{{fetch_type}}{%endif%} now</strong> <em>( {%if for_related%} Can take many minutes ! {%else%} Can take a few seconds {%endif%} )</em> <span>Last fetch : {%if for_related%}{{obj.last_fetch_related|default:'never'}}{%else%}{{obj.last_fetch|default:'never'}}{%endif%}</span> </button> </form> {%else%} {%if for_related and not obj.last_fetch%} <em>A first fetch is needed before fetching related</em> {%else%} {%if not for_related or obj.last_fetch%}<em class='fetch-date'>Last fetch{%if for_related%} of related{%endif%} on {%if for_related%}{{obj.last_fetch_related|default:'never'}}{%else%}{{obj.last_fetch|default:'never'}}{%endif%}</em>{%endif%} {%endif%} {%endif%} {%endif%} {%endwith %}{%endif%} {%with for_related=1 %}{%if not for_related or account.backend|supports:'user_related'%}{%with fetch_type="account" obj=account %}{%if request.user and request.user.is_authenticated%} {%if for_related and obj.fetch_related_allowed and obj.last_fetch or not for_related and obj.fetch_allowed%} <form class='fetch-form' action="/fetch/" method="post">{%csrf_token %} <input type="hidden" name="type" value="{{fetch_type}}"/> <input type="hidden" name="id" value="{{obj.id}}"/> <input type="hidden" name="backend" value="{{obj.backend}}"/> {%if fetch_type == 'account'%} <input type="hidden" name="slug" value="{{obj.slug}}"/> {%else%} <input type="hidden" name="project" value="{{obj.project}}"/> {%endif%} <input type="hidden" name="next" value="{{request.get_full_path}}"/> {%if for_related%} <input type="hidden" name="related" value="1"/> {%endif%} <button class="btn{%if for_related and not obj.last_fetch_related or not for_related and not obj.last_fetch or not for_related and fetch_type == 'repository' and is_fork and not obj.fork%} primary{%endif%}" type='submit' name='submit' value='submit' title="It will fetch {%if for_related%}followers, {%if fetch_type == 'account'%}following and repositories{%else%}contributors and readme{%endif%}{%else%}fresh data{%endif%} from {{obj.backend}}"> <strong>Fetch {%if for_related%}related{%else%}{{fetch_type}}{%endif%} now</strong> <em>( {%if for_related%} Can take many minutes ! {%else%} Can take a few seconds {%endif%} )</em> <span>Last fetch : {%if for_related%}{{obj.last_fetch_related|default:'never'}}{%else%}{{obj.last_fetch|default:'never'}}{%endif%}</span> </button> </form> {%else%} {%if for_related and not obj.last_fetch%} <em>A first fetch is needed before fetching related</em> {%else%} {%if not for_related or obj.last_fetch%}<em class='fetch-date'>Last fetch{%if for_related%} of related{%endif%} on {%if for_related%}{{obj.last_fetch_related|default:'never'}}{%else%}{{obj.last_fetch|default:'never'}}{%endif%}</em>{%endif%} {%endif%} {%endif%} {%endif%} {%endwith %}{%endif%} {%endwith %} </div> </header> {%if subsection == 'home'%}{%if request.user and request.user.is_authenticated%} <section class="sticky taped for-{{section}}" id="private"> <div id="note-part"{%if note%} class="with-note"{%endif%}> {%if note%} <div>{{note.rendered_content|safe}}</div> <a href="./?edit_note" title="Edit your private note (you'll be able to delete it too)"><small>edit your note (last update : {{note.modified}})</small></a> {%else%} <a href="./?edit_note"><small>Add a <strong>private</strong> note</small></a> {%endif%} {%if note_form%} <section id="note-edit" class="modal"> <form action="/private/notes/save/" method="POST" id="note-form" class="form-stacked">{%csrf_token %} <header class="modal-header"> <a class="close" href=".">&times;</a> <h3>{%if note%}Edit your private note{%else%}Add a private note{%endif%}</h3> </header> <section class="modal-body">{{note_form.as_p}}</section> <footer class="modal-footer"> <input class="btn primary" type="submit" name="submit" value="Save your note"/> <a class="btn secondary" href=".">Cancel</a> </footer> </form> {%if note_delete_form%} <form action="/private/notes/delete/" method="POST" id="note-delete-form">{%csrf_token %} {{note_delete_form.as_p}} <input class="btn error" type="submit" name="submit" value="Delete your note"/> </form> {%endif%} </section> {%endif%} </div> <div id="tags-part"{%if private_tags%} class="with-tags"{%endif%}> {%if private_tags%} <a href="./?edit_tags" title="Edit your private tags"><small>edit your tags</small></a> {%if section == "user"%} {%with obj_type="accounts" tags=private_tags %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} </ul> {%endif%} {%endwith %} {%else%} {%with obj_type="repositories" tags=private_tags %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} </ul> {%endif%} {%endwith %} {%endif%} {%else%} <a href="./?edit_tags"><small>Add <strong>private</strong> tags</small></a> {%endif%} {%if tags_form%} {{tags_form.media}} <section id="tags-edit" class="modal"> <form action="/private/tags/save/" method="POST" id="tags-form" class="form-stacked">{%csrf_token %} <header class="modal-header"> <a class="close" href=".">&times;</a> <h3>{%if note%}Edit your private tags{%else%}Add some private tags{%endif%}</h3> </header> <section class="modal-body"> {%for field in tags_form.hidden_fields %} {{field}} {%endfor %} <div> <label for="id_tags">Add your tags:</label> {{tags_form.tags}} <div class="helptext"> {%autoescape off %}{{tags_form.tags.help_text}}{%endautoescape %} </div> </div> </section> <footer class="modal-footer"> <input class="btn primary" type="submit" name="submit" value="Save your tags"/> <a class="btn secondary" href=".">Cancel</a> </footer> </form> {%if tags_delete_form%} <form action="/private/tags/delete/" method="POST" id="tags-delete-form">{%csrf_token %} {{tags_delete_form.as_p}} <input class="btn error" type="submit" name="submit" value="Delete your tags"/> </form> {%endif%} </section> {%endif%} </div>  {%with links=account|links_with_user:request.user %} {%if links%} <div id="specific-part"> Links between you and <em>{{account.slug}} </em>: <ul> {%if account.user.id == request.user.id%} <li>It's you !</li> {%else%} {%if links.following%} <li> You ( {%for account in links.following %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) are following him </li> {%endif%} {%if links.followed%} <li> He is following you ( {%for account in links.followed %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_following%} <li> You are following {%if links.project_following|length > 1%}some{%else%}one{%endif%} of its projects ( {%for repository in links.project_following %} {%with no_backend=1 %}<a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_followed%} <li> He is following {%if links.project_followed|length > 1%}some{%else%}one{%endif%} of your projects ( {%for repository in links.project_followed %} {%with no_backend=1 %}<a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%endif%} </ul> </div> {%else%}<br/>{%endif%} {%endwith %}  </section> {%endif%} {%endif%} {%if account.last_fetch%} <ul class="tabs"> <li{%if subsection == 'home'%} class="active"{%endif%}><a href="{{account.get_absolute_url}}">Home</a></li> {%if account.backend|supports:'user_followers'%} {%if account.followers_modified or subsection == 'followers'%} <li{%if subsection == 'followers'%} class="active"{%endif%}> <a href="{{account.get_followers_url}}">{{account.followers_count|default:0}}{%if not account.followers_modified%}?{%endif%} followers</a> </li> {%endif%} {%endif%} {%if account.backend|supports:'user_following'%} {%if account.following_modified or subsection == 'following'%} <li{%if subsection == 'following'%} class="active"{%endif%}> <a href="{{account.get_following_url}}">{{account.following_count|default:0}}{%if not account.following_modified%}?{%endif%} following</a> </li> {%endif%} {%endif%} {%if account.backend|supports:'user_repositories'%} {%if account.repositories_modified or subsection == 'repositories'%} <li{%if subsection == 'repositories'%} class="active"{%endif%}> <a href="{{account.get_repositories_url}}">{%if account.repositories_modified%}{{account.repositories_count|default:0}}{%else%}??{%endif%} repositories</a> </li> {%endif%} {%endif%} {%if account.backend|supports:'repository_contributors'%} {%if account.contributing_count or account.contributing_count == 0 or subsection == 'contributing'%} <li{%if subsection == 'contributing'%} class="active"{%endif%}> <a href="{{account.get_contributing_url}}">{{account.contributing_count|default:0}} contributed repositories</a> </li> {%endif%} {%endif%} </ul>  <div class="row"> <section class="span11"> <dl> {%if account.backend|supports:'user_followers'%} <dt> {%if account.followers_modified%} <a href="{{account.get_followers_url}}">{{account.followers_count|default:0}} followers</a> <small>(updated on {{account.followers_modified}})</small> {%else%} {{account.official_followers_count|default:0}} followers <small>(related must be fetched{%if not user.is_authenticated%} by an authenticated user {%endif%} before display)</small> {%endif%} </dt> <dd>Followers are people who are following {{account.slug}} to know about what he's doing on {{account.backend}}</dd> {%endif%} {%if account.backend|supports:'user_following'%} <dt> {%if account.following_modified%} <a href="{{account.get_following_url}}">{{account.following_count|default:0}} following</a> <small>(updated on {{account.following_modified}})</small> {%else%} {{account.official_following_count|default:0}} following <small>(related must be fetched{%if not user.is_authenticated%} by an authenticated user {%endif%} before display)</small> {%endif%} </dt> <dd>Following are people that {{account.slug}} follows to know what they are doing on {{account.backend}}</dd> {%endif%} {%if account.backend|supports:'user_repositories'%} <dt> {%if account.repositories_modified%} <a href="{{account.get_repositories_url}}">{{account.repositories_count|default:0}} repositories</a> <small>(updated on {{account.repositories_modified}})</small> {%else%} unknown number repositories <small>(related must be fetched{%if not user.is_authenticated%} by an authenticated user {%endif%} before display)</small> {%endif%} </dt> <dd>These repositories are the ones {{account.slug}} owns, or follows (or likes, stars...) on {{account.backend}}.</dd> {%endif%} {%if account.backend|supports:'repository_contributors'%} <dt> {%if account.contributing_count or account.contributing_count == 0%} <a href="{{account.get_contributing_url}}">{{account.contributing_count|default:0}} (or more) contributed repositories</a> {%else%} unknown number of contributed repositories {%endif%} </dt> <dd>These repositories are the ones to which {{account.slug}} contributed on {{account.backend}} (but there may be more).</dd> {%endif%} </dl> </section> <section class="span5"> <a class="btn primary" href="{{account.url}}"><img alt="{{account.backend}}" src="/static/img/favicon_{{account.backend}}.png"/> Go to the {{account.backend}} page</a> </section> </div>  {%else%} <div class="alert-message warning"><p>This account needs to be fetched once from {{account.backend}} before display.</p></div> {%endif%} </section>  </div> </div></body></html> 