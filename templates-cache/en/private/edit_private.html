{%if edit_object%} <div id="extra-editor" class="modal"> <header class="modal-header"> <a class="close" href="{{when_finished}}">&times;</a> <h3> Your privates notes about <a href="{{edit_object.get_absolute_url}}" title="{{edit_object.description|default:edit_object.name}}">{{edit_object.project|default:edit_object.slug}}</a> <small> - All on this window is private to you !</small> </h3> </header> <section class="modal-body">  <div id="note-form"> <header> <h3>Note:</h3>  {%if note_delete_form%} <form action="/private/notes/delete/" method="POST" id="note-delete-form">{%csrf_token %} {{note_delete_form.as_p}} <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> (<input class="reset-button" type="submit" name="submit" value="clear"/>) </form> {%endif%} </header>  <form action="/private/notes/save/" method="POST" id="note-save-form" class="form-stacked">{%csrf_token %} {{note_save_form.as_p}} <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> <input class="btn primary" type="submit" name="submit" value="Save"/> <input class="btn" type="submit" name="submit-close" value="Save and close"/> </form> </div><div id="tags-form"> {%url tags_save as tags_save_url %} <header> <h3>Tags:</h3>  {%if tags_delete_form%} <form action="/private/tags/delete/" method="POST" id="tags-delete-form">{%csrf_token %} {{tags_delete_form.as_p}} <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> (<input class="reset-button" type="submit" name="submit" value="clear"/>) </form> {%endif%} </header> <div>  {%if private_tags%} <label>Current: </label> <ul id="tags-deletable" class="tags unstyled"> {%for tag in private_tags %} <li class="label success"> <a href="{{url_tags}}?tag={{tag.slug}}">{{tag.name}}</a> <form action="{%if tags_save_url%}{{tags_save_url}}{%else%}/private/tags/save/{%endif%}" method="POST">{%csrf_token %} {{tag_save_form.as_p}} <input type="hidden" name="act" value="remove"/> <input type="hidden" name="tag" value="{{tag.name}}"/> <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> <input title="Remove" type="submit" name="submit" class="reset-button" value="-"/> </form>  </li> {%endfor %} </ul> {%else%} <p>No tags yet</p> {%endif%} {%if private_tags and other_tags%}<hr/>{%endif%}  {%if other_tags%} <label>Add: </label> <ul id="tags-addable" class="tags unstyled{%if other_tags|length > 20%} small{%endif%}">  {%for tag in other_tags %} <li class="label success"> <a href="{{url_tags}}?tag={{tag.slug}}">{{tag.name}}</a> <form action="{%if tags_save_url%}{{tags_save_url}}{%else%}/private/tags/save/{%endif%}" method="POST">{%csrf_token %} {{tag_save_form.as_p}} <input type="hidden" name="act" value="add"/> <input type="hidden" name="tag" value="{{tag.name}}"/> <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> <input title="Add" type="submit" name="submit" class="reset-button" value="+"/> </form>  </li> {%endfor %} </ul> {%endif%} </div>  <label>New: </label> <form action="{%if tags_save_url%}{{tags_save_url}}{%else%}/private/tags/save/{%endif%}" method="POST">{%csrf_token %} {{tag_save_form.as_p}} <input type="hidden" name="act" value="create"/> <input type="text" name="tag" value=""/> <input type="hidden" name="edit_url" value="{{edit_url}}"/> <input type="hidden" name="when_finished" value="{{when_finished}}"/> <input title="Add" type="submit" name="submit" class="reset-button" value="+"/> </form>  </div> </section> <footer class="modal-footer"> <a href="{{when_finished}}" class="btn primary">Close this window <small>(don't forget to save your note if needed !)</small></a> </footer> </div> {%endif%} 