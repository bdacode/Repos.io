{% load cache private_tags reposio_core%}  <div>  {%if messages%} <ul class="unstyled messages"> {%for message in messages %} <li data-alert="1" class="alert-message fade in {%if message.tags%}{{message.tags}}{%else%}info{%endif%}"><a href='#' class='close'>&times;</a><p>{{message}}</p></li> {%endfor %} </ul> {%endif%}  {%if not want_close%}  {%edit_private edit_extra %} {%else%}   <div>  {%if request.GET.main%}  {%if obj_type == 'account'%} {%with account=object%}  {%cache cache_timeout.private_common_part object.simple_str request.user.id object.modified %} {%with note_and_tags=object|note_and_tags:request.user %} <section class="sticky taped for-{{section}}{%if subsection == "home"%} open{%endif%}" id="private" data-object-key="{{object.simple_str}}"> <div> <div id="note-part"{%if note_and_tags.note%} class="with-note"{%endif%}> {%if note_and_tags.note%} <div>{{note_and_tags.note.rendered_content|safe}}</div> <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>edit your note (last update : {{note_and_tags.note.modified}})</small></a> {%else%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add a <strong>private</strong> note</small></a> {%endif%} </div> <div id="tags-part"{%if note_and_tags.flags_and_tags%} class="with-tags"{%endif%}> {%if note_and_tags.flags_and_tags%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
" title="Edit your private tags"><small>edit your tags</small></a> {%if section == "user"%} {%with obj_type="accounts" tags=note_and_tags.flags_and_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%else%} {%with obj_type="repositories" tags=note_and_tags.flags_and_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%endif%} {%else%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add <strong>private</strong> tags</small></a> {%endif%} </div>  {%cache cache_timeout.private_specific_part object.simple_str request.user.id object.modified %} {%with links=account|links_with_user:request.user %} {%if links%} <div id="specific-part"> Links between you and <em>{{account.slug}} </em>: <ul> {%if account.user.id == request.user.id%} <li>It's you !</li> {%else%} {%if links.following%} <li> You ( {%for account in links.following %}  {%with no_backend=1 %} <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) are following him </li> {%endif%} {%if links.followed%} <li> He is following you ( {%for account in links.followed %}  {%with no_backend=1 %} <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_following%} <li> You are following {%if links.project_following|length > 1%}some{%else%}one{%endif%} of its projects ( {%for repository in links.project_following %}  {%with no_backend=1 %} <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_followed%} <li> He is following {%if links.project_followed|length > 1%}some{%else%}one{%endif%} of your projects ( {%for repository in links.project_followed %}  {%with no_backend=1 %} <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%endif%} </ul> </div> {%endif%} {%endwith %} {%endcache %}  </div> </section> {%endwith %} {%endcache %} {%endwith%} {%endif%} {%if obj_type == 'repository'%} {%with repository=object%}  {%cache cache_timeout.private_common_part object.simple_str request.user.id object.modified %} {%with note_and_tags=object|note_and_tags:request.user %} <section class="sticky taped for-{{section}}{%if subsection == "home"%} open{%endif%}" id="private" data-object-key="{{object.simple_str}}"> <div> <div id="note-part"{%if note_and_tags.note%} class="with-note"{%endif%}> {%if note_and_tags.note%} <div>{{note_and_tags.note.rendered_content|safe}}</div> <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>edit your note (last update : {{note_and_tags.note.modified}})</small></a> {%else%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add a <strong>private</strong> note</small></a> {%endif%} </div> <div id="tags-part"{%if note_and_tags.flags_and_tags%} class="with-tags"{%endif%}> {%if note_and_tags.flags_and_tags%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
" title="Edit your private tags"><small>edit your tags</small></a> {%if section == "user"%} {%with obj_type="accounts" tags=note_and_tags.flags_and_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%else%} {%with obj_type="repositories" tags=note_and_tags.flags_and_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%endif%} {%else%} <a href="
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add <strong>private</strong> tags</small></a> {%endif%} </div>  {%cache cache_timeout.private_specific_part object.simple_str request.user.id object.modified %} {%with links=repository|links_with_user:request.user %} {%if links%} <div id="specific-part"> Links between you and <em>{{repository.project}}</em> : <ul> {%if links.owning%} <li> You ( {%with account=links.owning %} {%with no_backend=1 %} <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %} {%endwith %} ) are the owner </li> {%endif%} {%if links.following or links.project_following%} <li> {%if links.following%} You ( {%for account in links.following %}  {%with no_backend=1 %} <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) are following this project {%endif%} {%if links.project_following%} {%if links.following%} and {%if links.project_following|length > 1%}related ones{%else%}a related one{%endif%} {%else%} You are following {%if links.project_following|length > 1%}related projects{%else%}a related project{%endif%} {%endif%} ( {%for repository in links.project_following %}  <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a>  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} </li> {%endif%} {%if links.contributing%} <li> You ( {%for account in links.contributing %}  {%with no_backend=1 %} <a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) made some contributions to this project. </li> {%endif%} {%if links.forks or links.project_forks%} <li> You have {%if links.forks%} {%if links.forks|length > 1%}forks{%else%} a fork{%endif%} ( {%for repository in links.forks %}  {%with no_backend=1 %} <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} {%if links.project_forks%} {%if links.forks%} and {%endif%} {%if links.project_forks|length > 1%}indirect forks{%else%} an indirect fork{%endif%} ( {%for repository in links.project_forks %}  <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a>  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} </li> {%endif%} </ul> </div> {%else%}<br/>{%endif%} {%endwith %} {%endcache %}  </div> </section> {%endwith %} {%endcache %} {%endwith%} {%endif%} {%else%}  {%if request.GET.exclude%} {%prepare_private object request.GET.exclude %} {%else%} {%prepare_private object %} {%endif%} <table><tr> {%with obj=object %} {%if obj_type == 'account'%} {%with account=object%} {%if user.id%} <td class="{%if account.current_user_has_extra%}full{%else%}empty{%endif%}" data-object-key="{{account.simple_str}}"> <div><a href="{%with object=account%}
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
{%endwith%}" title="{%if account.current_user_has_extra%}Edit your private tags and private note{%else%}Add some private tags or a private note{%endif%}" class="btn">{%if account.current_user_has_extra%}edit{%else%}+{%endif%}</a></div> {%if account.current_user_has_extra%} <div class="extra{%if account.current_user_has_note%} with_note {%endif%}{%if account.current_user_has_tags%} with_tags{%endif%}{%if account.current_user_follows or account.current_user_followed or account.current_user_is_self%} with_special_tags{%endif%}"> {%with obj=account %} {%if obj.current_user_has_note or obj.current_user_has_tags%} <div class="rel_popover_extra" data-popover-title="Your private informations" title="You have private informations !"> <a href="{{obj.get_absolute_url}}"><img src="/static/img/sticky_note.png" alt="Private note"/></a> <div><div class="extra_container{%if obj.current_user_has_note%} with_note {%endif%}{%if obj.current_user_has_tags%} with_tags{%endif%}"> {%if obj.current_user_has_tags%} {%with tags=obj.current_user_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%endif%} {%if obj.current_user_has_note%} <blockquote>{{obj.current_user_rendered_note|safe}}</blockquote> <hr/> <em>Last updated: {{obj.current_user_note_modified}}</em> {%endif%} </div></div> </div> {%endif%} {%endwith %} {%if not minimal%} {%if account.current_user_follows or account.current_user_followed or account.current_user_is_self%} <ul class="special-tags unstyled"> {%if account.current_user_follows%}<li class="label notice" title="You follow {{account.slug}}">following</li>{%endif%} {%if account.current_user_followed%}<li class="label notice" title="{{account.slug}} follows you">followed by</li>{%endif%} {%if account.current_user_is_self%}<li class="label success" title="{{account.slug}} is one of your accounts">you</li>{%endif%} </ul> {%endif%} {%endif%} </div> {%endif%} </td> {%endif%} {%endwith%} {%endif%} {%if obj_type == 'repository'%} {%with repository=object%} {%if user.id%} <td class="{%if repository.current_user_has_extra%}full{%else%}empty{%endif%}" data-object-key="{{repository.simple_str}}"> <div><a href="{%with object=repository%}
?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
{%endwith%}" title="{%if repository.current_user_has_extra%}Edit your private tags and private note{%else%}Add some private tags or a private note{%endif%}" class="btn">{%if repository.current_user_has_extra%}edit{%else%}+{%endif%}</a></div> {%if repository.current_user_has_extra%} <div class="extra{%if repository.current_user_has_note%} with_note {%endif%}{%if repository.current_user_has_tags%} with_tags{%endif%}{%if repository.current_user_follows or repository.current_user_owns or repository.current_user_has_fork%} with_special_tags{%endif%}"> {%with obj=repository %} {%if obj.current_user_has_note or obj.current_user_has_tags%} <div class="rel_popover_extra" data-popover-title="Your private informations" title="You have private informations !"> <a href="{{obj.get_absolute_url}}"><img src="/static/img/sticky_note.png" alt="Private note"/></a> <div><div class="extra_container{%if obj.current_user_has_note%} with_note {%endif%}{%if obj.current_user_has_tags%} with_tags{%endif%}"> {%if obj.current_user_has_tags%} {%with tags=obj.current_user_tags with_flags=1 %} {%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%endif%} {%if obj.current_user_has_note%} <blockquote>{{obj.current_user_rendered_note|safe}}</blockquote> <hr/> <em>Last updated: {{obj.current_user_note_modified}}</em> {%endif%} </div></div> </div> {%endif%} {%endwith %} {%if not minimal%} {%if repository.current_user_follows or repository.current_user_owns or repository.current_user_has_fork%} <ul class="special-tags unstyled"> {%if repository.current_user_owns%}<li class="label success" title="{{repository.project}} is your project">yours</li>{%endif%} {%if repository.current_user_follows%}<li class="label notice" title="You follow {{repository.project}}">following</li>{%endif%} {%if repository.current_user_has_fork%}<li class="label warning" title="You have a fork of {{repository.project}}">forked</li>{%endif%} </ul> {%endif%} {%endif%} </div> {%endif%} </td> {%endif%} {%endwith%} {%endif%} {%endwith %} </tr></table> {%endif%} </div>  {%endif%} </div> 