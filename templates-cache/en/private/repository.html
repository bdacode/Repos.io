{% load reposio_core%}{%if request.user and request.user.is_authenticated%} <section class="sticky taped for-{{section}}" id="private"> <div id="note-part"{%if note%} class="with-note"{%endif%}> {%if note%} <div>{{note.rendered_content|safe}}</div> <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}#extra-editor
"><small>edit your note (last update : {{note.modified}})</small></a> {%else%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}#extra-editor
"><small>Add a <strong>private</strong> note</small></a> {%endif%} {%if note_form%} <section id="note-edit" class="modal"> <form action="/private/notes/save/" method="POST" id="note-form" class="form-stacked">{%csrf_token %} <header class="modal-header"> <a class="close" href=".">&times;</a> <h3>{%if note%}Edit your private note{%else%}Add a private note{%endif%}</h3> </header> <section class="modal-body">{{note_form.as_p}}</section> <footer class="modal-footer"> <input class="btn primary" type="submit" name="submit" value="Save your note"/> <a class="btn secondary" href=".">Cancel</a> </footer> </form> {%if note_delete_form%} <form action="/private/notes/delete/" method="POST" id="note-delete-form">{%csrf_token %} {{note_delete_form.as_p}} <input class="btn error" type="submit" name="submit" value="Delete your note"/> </form> {%endif%} </section> {%endif%} </div> <div id="tags-part"{%if private_tags%} class="with-tags"{%endif%}> {%if private_tags%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}#extra-editor
" title="Edit your private tags"><small>edit your tags</small></a> {%if section == "user"%} {%with obj_type="accounts" tags=private_tags %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} </ul> {%endif%} {%endwith %} {%else%} {%with obj_type="repositories" tags=private_tags %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} </ul> {%endif%} {%endwith %} {%endif%} {%else%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}#extra-editor
"><small>Add <strong>private</strong> tags</small></a> {%endif%} {%if tags_form%} {{tags_form.media}} <section id="tags-edit" class="modal"> <form action="/private/tags/save/" method="POST" id="tags-form" class="form-stacked">{%csrf_token %} <header class="modal-header"> <a class="close" href=".">&times;</a> <h3>{%if note%}Edit your private tags{%else%}Add some private tags{%endif%}</h3> </header> <section class="modal-body"> {%for field in tags_form.hidden_fields %} {{field}} {%endfor %} <div> <label for="id_tags">Add your tags:</label> {{tags_form.tags}} <div class="helptext"> {%autoescape off %}{{tags_form.tags.help_text}}{%endautoescape %} </div> </div> </section> <footer class="modal-footer"> <input class="btn primary" type="submit" name="submit" value="Save your tags"/> <a class="btn secondary" href=".">Cancel</a> </footer> </form> {%if tags_delete_form%} <form action="/private/tags/delete/" method="POST" id="tags-delete-form">{%csrf_token %} {{tags_delete_form.as_p}} <input class="btn error" type="submit" name="submit" value="Delete your tags"/> </form> {%endif%} </section> {%endif%} </div>  {%with links=repository|links_with_user:request.user %} {%if links%} <div id="specific-part"> Links between you and <em>{{repository.project}}</em> : <ul> {%if links.owning%} <li> You ( {%with account=links.owning %}{%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %} {%endwith %} ) are the owner </li> {%endif%} {%if links.following or links.project_following%} <li> {%if links.following%} You ( {%for account in links.following %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) are following this project {%endif%} {%if links.project_following%} {%if links.following%} and {%if links.project_following|length > 1%}related ones{%else%}a related one{%endif%} {%else%} You are following {%if links.project_following|length > 1%}related projects{%else%}a related project{%endif%} {%endif%} ( {%for repository in links.project_following %} <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a>  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} </li> {%endif%} {%if links.contributing%} <li> You ( {%for account in links.contributing %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) made some contributions to this project. </li> {%endif%} {%if links.forks or links.project_forks%} <li> You have {%if links.forks%} {%if links.forks|length > 1%}forks{%else%} a fork{%endif%} ( {%for repository in links.forks %} {%with no_backend=1 %}<a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} {%if links.project_forks%} {%if links.forks%} and {%endif%} {%if links.project_forks|length > 1%}indirect forks{%else%} an indirect fork{%endif%} ( {%for repository in links.project_forks %} <a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a>  {%if not forloop.last%}, {%endif%} {%endfor %} ) {%endif%} </li> {%endif%} </ul> </div> {%else%}<br/>{%endif%} {%endwith %}  </section> {%endif%} 