{% load cache reposio_core%} {%cache cache_timeout.private_common_part object.simple_str request.user.id object.modified %} {%with note_and_tags=object|note_and_tags:request.user %} <section class="sticky taped for-{{section}}{%if subsection == "home"%} open{%endif%}" id="private"> <div id="note-part"{%if note_and_tags.note%} class="with-note"{%endif%}> {%if note_and_tags.note%} <div>{{note_and_tags.note.rendered_content|safe}}</div> <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>edit your note (last update : {{note_and_tags.note.modified}})</small></a> {%else%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add a <strong>private</strong> note</small></a> {%endif%} </div> <div id="tags-part"{%if note_and_tags.flags_and_tags%} class="with-tags"{%endif%}> {%if note_and_tags.flags_and_tags%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
" title="Edit your private tags"><small>edit your tags</small></a> {%if section == "user"%} {%with obj_type="accounts" tags=note_and_tags.flags_and_tags with_flags=1 %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%else%} {%with obj_type="repositories" tags=note_and_tags.flags_and_tags with_flags=1 %}{%if tags%} {%url dashboard_tags obj_type=obj_type as tag_link %} <ul class="tags unstyled"> {%if with_flags%} {%for tag in tags.special_used %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label warning">{{tag.name}}</a></li> {%endfor %} {%if tags.normal and tags.special_used%}<br/>{%endif%} {%for tag in tags.normal %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%else%} {%for tag in tags %} <li><a href="{{tag_link}}?tag={{tag.slug}}" class="label success">{{tag.name}}</a></li> {%endfor %} {%endif%} </ul> {%endif%} {%endwith %} {%endif%} {%else%} <a href="?{%if request.META.QUERY_STRING%}{{request.META.QUERY_STRING}}&amp;{%endif%}{%if 'edit_extra' in request.META.QUERY_STRING%}_={%now "u" %}{%else%}edit_extra={{object.simple_str}}&amp;when_finished={{current_request|urlencode}}{%endif%}#extra-editor
"><small>Add <strong>private</strong> tags</small></a> {%endif%} </div>  {%cache cache_timeout.private_specific_part object.simple_str request.user.id object.modified %} {%with links=account|links_with_user:request.user %} {%if links%} <div id="specific-part"> Links between you and <em>{{account.slug}} </em>: <ul> {%if account.user.id == request.user.id%} <li>It's you !</li> {%else%} {%if links.following%} <li> You ( {%for account in links.following %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) are following him </li> {%endif%} {%if links.followed%} <li> He is following you ( {%for account in links.followed %} {%with no_backend=1 %}<a href="{{account.get_absolute_url}}" title="{%if account.name%}{{account.name}}{%else%}{{account.slug}}{%endif%}{%if not account.last_fetch%} (not fetched){%endif%}">{%if with_avatar%}<img alt="{{account.slug}}'s avatar" width="{{avatar_size|default:32}}" height="{{avatar_size|default:32}}" src="{%if account.avatar%}{{account.avatar}}{%else%}/static/img/avatar_default_{{account.backend}}.png{%endif%}"/> {%endif%}{{account.slug}}{%if not no_backend%}<small> @ {{account.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_following%} <li> You are following {%if links.project_following|length > 1%}some{%else%}one{%endif%} of its projects ( {%for repository in links.project_following %} {%with no_backend=1 %}<a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%if links.project_followed%} <li> He is following {%if links.project_followed|length > 1%}some{%else%}one{%endif%} of your projects ( {%for repository in links.project_followed %} {%with no_backend=1 %}<a href="{{repository.get_absolute_url}}">{%if no_owner%}{{repository.slug}}{%else%}{{repository.project}}{%endif%}{%if not no_backend%}<small> @ {{repository.backend}}</small>{%endif%}</a> {%endwith %}  {%if not forloop.last%}, {%endif%} {%endfor %} ) </li> {%endif%} {%endif%} </ul> </div> {%else%}<br/>{%endif%} {%endwith %} {%endcache %}  </section> {%endwith %} {%endcache %} 