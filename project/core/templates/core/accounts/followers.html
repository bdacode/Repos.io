{% extends "core/accounts/base.html" %}
{% load private_tags tagging_tags %}
{% block title %}Followers of {{ block.super }}{% endblock %}
{% block account_content %}

    {% if account.followers_modified %}

        {% if sorted_followers %}
            {% prepare_private sorted_followers %}
            {% prepare_public_tags sorted_followers %}

            <p>{{ account.slug }} is followed by {{ account.followers_count }} people : <small>(last fetch on {{ account.followers_modified }})</small></p>

            <table class='zebra-striped accounts with_extras'>
                <thead>
                    <tr>
                        {% with color="orange" key="name" name="Name" %}{% include "core/sort_th.html" %}{% endwith %}
                        <th class="blue">Reciprocity</th>
                        <th class="green">Links</th>
                    </tr>
                </thead>
                <tbody>
                    {% with viewed_account=account %}
                    {% for account in sorted_followers %}
                    <tr>
                        <td>
                            {% include "core/accounts/main_account_cell.html" %}
                        </td>
                        {% if account.id in viewed_account.following_ids %}<td title="{{ viewed_account.slug }} follows {{ account.slug }} too !">&check;</td>{% else %}<td></td>{% endif %}
                        <td>
                            {% include "core/accounts/links.html" %}
                        </td>
                    </tr>
                    {% endfor %}
                    {% endwith %}
                </tbody>
            </table>

        {% else %}
            <p>{{ account.slug }} doesn't have any follower</p>
        {% endif %}

    {% else %}
        <p>{{ account.slug }} has {{ account.official_followers_count }} followers, but they need to be fetched{% if not user.is_authenticated %} by an authenticated user{% endif %}</p>
    {% endif %}

{% endblock account_content %}
